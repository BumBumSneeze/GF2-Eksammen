using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.IO;
using System.IO.Ports;
using System.Threading;

namespace Arduino_ting
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.Write("What port: ");
            string portName = Console.ReadLine();
            string tid = DateTime.Now.ToString("HH:mm:ss tt");
            SerialPort port = new SerialPort(portName, 9600, Parity.None, 8, StopBits.One);
            port.Open();
            port.DataReceived += new SerialDataReceivedEventHandler(port_DataReceived);

            void port_DataReceived(object sender, SerialDataReceivedEventArgs e)
            {   
               var text = port.ReadExisting();
               if (text != null)
                {
                    Console.Write(text + "" + tid);
                    port.Close();
                }
            }
            Console.ReadKey();
        }
    }
}
